<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>模拟方块舞</title>
</head>

<body>
    <script type="text/javascript">
    function Queue() {
        this.dataStore = {};
        this.enqueue = enqueue;
        this.dequeue = dequeue;
        this.front = front;
        this.back = back;
        this.toString = toString;
        this.empty = empty;
    }

    function enqueue(element) {
        this.dataStore.push(element);
    }

    function dequeue() {
        return this.dataStore[0];
    }

    function front() {
        return this.dataStore[0];
    }

    function back() {
        return this.dataStore[this.dataStore.length - 1];
    }

    function toString() {
        var retStr = "";
        for (var i = 0; i < this.dataStore.length; ++i) {
            retStr += this.dataStore[i] + "\n";
        }
        return retStr;
    }

    function empty() {
        if (this.dataStore.length == 0) {
            return true;
        } else {
            return false;
        }
    }

    function Dancer(name, sex) {
        this.name = name;
        this.sex = sex;
    }

    function getDancers(males, females) {
        var names = read("dancers.txt").split("\n");
        for (var i = 0; i < names.length; ++i) {
            names[i] = names[i].trim();
        }
        for (var i = 0; i < names.length; ++i) {
            var dancer = names[i].split("");
            var sex = dancer[0];
            var name = dancer[1];
            if (sex == "F") {
                femaleDancers.enqueue(new Dancer(name, sex));
            } else {
                maleDancers.enqueue(new Dancer(name, sex));
            }
        }
    }

    function dance(males, females) {
        print("The dance partners are:\n");
        while (!females.empty() && !males.empty()) {
            person = females.dequeue();
            putstr('Female dancer is' + person.name);
            person = males.dequeue();
            print("and the male dance is:" + person.name);
        }
        print();
    }
    // 测试程序
    var maleDancers = new Queue();
    var femaleDancers = new Queue();
    getDancers(maleDancers, femaleDancers);
    dance(maleDancers, femaleDancers);
    if (!femaleDancers.empty()) {
        console.log(femaleDancers.front().name + "is waiting to dance");
    }
    if (!maleDancers.empty()) {
        console.log(maleDancers.front().name + "is waiting to dance");
    }
    /*
         The dance partners are:
         Female dancer is: Allison and the male dancer is:Frank
         Female dancer is:Cheryl and the male dancer is:Mason
         Female dancer is:Jennifer and the male dancer is:Clayton
         Female dancer is:Aurora and the male dancer is:Raymond
         There are 3 male dancers waiting to dance

     */
    </script>
</body>

</html>